"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[6920],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>d});var o=a(67294);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,o,n=function(t,e){if(null==t)return{};var a,o,n={},r=Object.keys(t);for(o=0;o<r.length;o++)a=r[o],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)a=r[o],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var s=o.createContext({}),u=function(t){var e=o.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=u(t.components);return o.createElement(s.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},m=o.forwardRef((function(t,e){var a=t.components,n=t.mdxType,r=t.originalType,s=t.parentName,c=l(t,["components","mdxType","originalType","parentName"]),m=u(a),d=n,h=m["".concat(s,".").concat(d)]||m[d]||p[d]||r;return a?o.createElement(h,i(i({ref:e},c),{},{components:a})):o.createElement(h,i({ref:e},c))}));function d(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:n,i[1]=l;for(var u=2;u<r;u++)i[u]=a[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},18886:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var o=a(87462),n=(a(67294),a(3905));const r={title:"[Outdated] Use TiDB Cloud to Analyze GitHub Events in 10 Minutes",date:new Date("2022-04-01T00:00:00.000Z"),authors:["fendy","hooopo"],tags:["tidbcloud"],image:"./import.png",description:"In this tutorial, we will provide you with a piece of sample data of all GitHub events occurring on January 1, 2022, and walk you through on how to use TiDB Cloud to analyze this data in 10 minutes.",keywords:["tutorial","TiDB Cloud Serverless Tier","Import massive data","column storage replica","tidb","top ranking","github","database","github archive","gitHub metrics"]},i=void 0,l={permalink:"/blog/try-it-yourself",editUrl:"https://github.com/pingcap/ossinsight/edit/main/web/blog/try-it-yourself/index.md",source:"@site/blog/try-it-yourself/index.md",title:"[Outdated] Use TiDB Cloud to Analyze GitHub Events in 10 Minutes",description:"In this tutorial, we will provide you with a piece of sample data of all GitHub events occurring on January 1, 2022, and walk you through on how to use TiDB Cloud to analyze this data in 10 minutes.",date:"2022-04-01T00:00:00.000Z",formattedDate:"April 1, 2022",tags:[{label:"tidbcloud",permalink:"/blog/tags/tidbcloud"}],readingTime:4.905,hasTruncateMarker:!0,authors:[{name:"Fendy Feng",title:"Technical Content Developer",url:"https://github.com/septemberfd",imageURL:"https://github.com/septemberfd.png",key:"fendy"},{name:"hooopo",title:"Engineer of TiDB Community",url:"https://twitter.com/hooopo",imageURL:"https://github.com/hooopo.png",key:"hooopo"}],frontMatter:{title:"[Outdated] Use TiDB Cloud to Analyze GitHub Events in 10 Minutes",date:"2022-04-01T00:00:00.000Z",authors:["fendy","hooopo"],tags:["tidbcloud"],image:"./import.png",description:"In this tutorial, we will provide you with a piece of sample data of all GitHub events occurring on January 1, 2022, and walk you through on how to use TiDB Cloud to analyze this data in 10 minutes.",keywords:["tutorial","TiDB Cloud Serverless Tier","Import massive data","column storage replica","tidb","top ranking","github","database","github archive","gitHub metrics"]},prevItem:{title:"SaaS Insight for Building a Real-time CRM Application",permalink:"/blog/saas-insight-for-building-a-real-time-crm-application"},nextItem:{title:"Data Preparation for Analytics",permalink:"/blog/how-it-works"}},s={image:a(23899).Z,authorsImageUrls:[void 0,void 0]},u=[{value:"Sign up for a TiDB Cloud account (Free)",id:"sign-up-for-a-tidb-cloud-account-free",level:2},{value:"Create a TiDB Cloud Serverless Tier cluster",id:"create-a-tidb-cloud-serverless-tier-cluster",level:2},{value:"Import data to your TiDB Cloud cluster",id:"import-data-to-your-tidb-cloud-cluster",level:2},{value:"Import the data",id:"import-the-data",level:3},{value:"Use the web shell to check if data is ready",id:"use-the-web-shell-to-check-if-data-is-ready",level:3},{value:"Set column storage replica: TiFlash (Optional but could make SQL faster!)",id:"set-column-storage-replica-tiflash-optional-but-could-make-sql-faster",level:3},{value:"Analysis!",id:"analysis",level:2},{value:"How many events occurred in total?",id:"how-many-events-occurred-in-total",level:3},{value:"Which repository gets the most stars?",id:"which-repository-gets-the-most-stars",level:3},{value:"Mini Test",id:"mini-test",level:2},{value:"Q: Who is the most active contributor except the robot accounts on the first hour of 2022?",id:"q-who-is-the-most-active-contributor-except-the-robot-accounts-on-the-first-hour-of-2022",level:3},{value:"Click for the answer. \u2b07\ufe0f",id:"click-for-the-answer-\ufe0f",level:3}],c={toc:u};function p(t){let{components:e,...r}=t;return(0,n.kt)("wrapper",(0,o.Z)({},c,r,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.pingcap.com/tidb/stable/overview?utm_source=ossinsight&utm_medium=referral"},"TiDB")," is an open source distributed NewSQL database with horizontal scalability, high availability, and strong consistency. It can also deal with mixed OLTP and OLAP workloads at the same time by leveraging its hybrid transactional and analytical (HTAP) capability. "),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"https://docs.pingcap.com/tidbcloud/public-preview?utm_source=ossinsight&utm_medium=referral"},"TiDB Cloud")," is a fully-managed Database-as-a-Service (DBaaS)")," that brings everything great about TiDB to your cloud and lets you focus on your applications, not the complexities of your database. "),(0,n.kt)("p",null,"In this tutorial, we will provide you with a piece of sample data of all GitHub events occurring on January 1, 2022, and walk you through on how to use TiDB Cloud to analyze this data in 10 minutes.  "),(0,n.kt)("h2",{id:"sign-up-for-a-tidb-cloud-account-free"},"Sign up for a TiDB Cloud account (Free)"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("a",{parentName:"li",href:"https://tidbcloud.com/free-trial/?utm_source=ossinsight&utm_medium=community"},"here")," to sign up for a TiDB Cloud account free of charge. "),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://tidbcloud.com/?utm_source=ossinsight&utm_medium=community"},"Log in")," to your account.")),(0,n.kt)("h2",{id:"create-a-tidb-cloud-serverless-tier-cluster"},"Create a TiDB Cloud Serverless Tier cluster"),(0,n.kt)("p",null,"Once you register an account, you can create a cluster with TiDB Cloud Serverless Tier. "),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"}," A cluster is a database to store data. ")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"Get Started for Free")," and start to create a cluster.")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(86325).Z,width:"2634",height:"1452"})),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"On the ",(0,n.kt)("strong",{parentName:"li"},"Create a Cluster")," page, set up your cluster name and root password."),(0,n.kt)("li",{parentName:"ol"},"Note that the cloud provider is AWS by default, and then ",(0,n.kt)("strong",{parentName:"li"},"MUST")," select the ",(0,n.kt)("inlineCode",{parentName:"li"},"US-West-2 (Oregon)")," region to create the cluster."),(0,n.kt)("li",{parentName:"ol"},"The cluster tier is S1.dev by default."),(0,n.kt)("li",{parentName:"ol"},"Click ",(0,n.kt)("strong",{parentName:"li"},"Submit"),".\nYour TiDB Cloud cluster will be created in approximately 1 to 3 minutes.")),(0,n.kt)("h2",{id:"import-data-to-your-tidb-cloud-cluster"},"Import data to your TiDB Cloud cluster"),(0,n.kt)("h3",{id:"import-the-data"},"Import the data"),(0,n.kt)("p",null,"Once your cluster is ready, you can start to import the sample data to your cluster. "),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"We have merged the create database/table in the SQL files, so you don't need to ",(0,n.kt)("inlineCode",{parentName:"p"},"create database/tables")," by yourself."),(0,n.kt)("p",{parentName:"admonition"},"If you want to know the table schema, you can check ",(0,n.kt)("inlineCode",{parentName:"p"},"desc gharchive_dev")," later in the following step. ")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Click your cluster name in ",(0,n.kt)("strong",{parentName:"li"},"Active Cluster")," page to get into the detail page of your cluster."),(0,n.kt)("li",{parentName:"ol"},"Click the ",(0,n.kt)("strong",{parentName:"li"},"Import")," button on the ",(0,n.kt)("strong",{parentName:"li"},"Active Clusters")," page and then go to the ",(0,n.kt)("strong",{parentName:"li"},"Data Import Task")," page. ")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(23899).Z,width:"2880",height:"1800"})),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Copy the values below and paste to the blanks of ",(0,n.kt)("strong",{parentName:"li"},"Bucket URL")," and ",(0,n.kt)("strong",{parentName:"li"},"Role-ARN")," respectively on the ",(0,n.kt)("strong",{parentName:"li"},"Data Import Task")," page.")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Bucket URL"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"s3://tidbcloud-samples/gharchive/\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Role-ARN"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"arn:aws:iam::385595570414:role/import-sample-access\n")),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"Choose ",(0,n.kt)("strong",{parentName:"li"},"US West (Oregon)")," for your ",(0,n.kt)("strong",{parentName:"li"},"Bucket region"),";"),(0,n.kt)("li",{parentName:"ol"},"Tick ",(0,n.kt)("strong",{parentName:"li"},"TiDB Dumpling")," for the ",(0,n.kt)("strong",{parentName:"li"},"Data Format"),". "),(0,n.kt)("li",{parentName:"ol"},"Input your cluster password in the blank of ",(0,n.kt)("strong",{parentName:"li"},"Password")," on the ",(0,n.kt)("strong",{parentName:"li"},"Target Database")," section. ")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(20742).Z,width:"2880",height:"1800"})),(0,n.kt)("ol",{start:7},(0,n.kt)("li",{parentName:"ol"},"After you fill in all the blanks on the ",(0,n.kt)("strong",{parentName:"li"},"Data Import Task")," page, click the ",(0,n.kt)("strong",{parentName:"li"},"Import")," button at the bottom of this page and wait for a few moments for the system to complete data importing. ")),(0,n.kt)("h3",{id:"use-the-web-shell-to-check-if-data-is-ready"},"Use the web shell to check if data is ready"),(0,n.kt)("p",null,"TiDB Cloud provides a web shell to connect the database online. "),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Click the ",(0,n.kt)("strong",{parentName:"li"},"Exit")," button after you successfully import the data into your cluster. "),(0,n.kt)("li",{parentName:"ol"},"Click your cluster name in ",(0,n.kt)("strong",{parentName:"li"},"Active Cluster")," page to get into the detail page of your cluster."),(0,n.kt)("li",{parentName:"ol"},"Then, click the ",(0,n.kt)("strong",{parentName:"li"},"Connect")," button and the ",(0,n.kt)("strong",{parentName:"li"},"Connect to TiDB")," panel pops out. "),(0,n.kt)("li",{parentName:"ol"},"Choose ",(0,n.kt)("strong",{parentName:"li"},"Web SQL Shell")," --\x3e ",(0,n.kt)("strong",{parentName:"li"},"Open SQL Shell"),". "),(0,n.kt)("li",{parentName:"ol"},"Then input your cluster password as shown in the image below.")),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(79958).Z,width:"2880",height:"1800"})),(0,n.kt)("h3",{id:"set-column-storage-replica-tiflash-optional-but-could-make-sql-faster"},"Set column storage replica: TiFlash (Optional but could make SQL faster!)"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.pingcap.com/tidb/stable/tiflash-overview?utm_source=ossinsight&utm_medium=referral"},"TiFlash")," is the key component that makes TiDB / TiDB Cloud an HTAP database and capable of dealing with OLTP and OLAP workloads at the same time. "),(0,n.kt)("p",null,"Here, you can try the following SQL commands on TiDB Cloud to experience its real-time analytics with ease."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Execute the SQL statements specified below ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"use gharchive_dev;\nALTER TABLE github_events SET TIFLASH REPLICA 1;\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Setting a TiFlash replica will take you some time, so you can use the following SQL statements to check if the procedure is done or not. ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM information_schema.tiflash_replica WHERE TABLE_SCHEMA = 'gharchive_dev' and TABLE_NAME = 'github_events';\n")),(0,n.kt)("p",null,"If the results you get are the same as follows, then it means the procedure is done. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"mysql> SELECT * FROM information_schema.tiflash_replica WHERE TABLE_SCHEMA = 'gharchive_dev' and TABLE_NAME = 'github_events';\n+---------------+---------------+----------+---------------+-----------------+-----------+----------+\n| TABLE_SCHEMA  | TABLE_NAME    | TABLE_ID | REPLICA_COUNT | LOCATION_LABELS | AVAILABLE | PROGRESS |\n+---------------+---------------+----------+---------------+-----------------+-----------+----------+\n| gharchive_dev | github_events |       68 |             1 |                 |         1 |        1 |\n+---------------+---------------+----------+---------------+-----------------+-----------+----------+\n1 row in set (0.27 sec)\n\nmysql>\n")),(0,n.kt)("h2",{id:"analysis"},"Analysis!"),(0,n.kt)("p",null,"After you finish all the steps above, you can start the analytical process. "),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"If you want to know the table schema, you can use ",(0,n.kt)("inlineCode",{parentName:"p"},"show create table tbl_name")," to get that information.")),(0,n.kt)("p",null,"Because you have imported the sample data of all GitHub events occurred on the first hour of 2022 (from 2022-01-01 00:00:00 to 2022-01-01 00:59:59), you can start to make any queries based on that data by using SQL commands. "),(0,n.kt)("h3",{id:"how-many-events-occurred-in-total"},"How many events occurred in total?"),(0,n.kt)("p",null,"Execute the following SQL statement to query the total number of events. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT count(*) FROM github_events;\n")),(0,n.kt)("h3",{id:"which-repository-gets-the-most-stars"},"Which repository gets the most stars?"),(0,n.kt)("p",null,"Execute the following statements to query the most starred repository. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"  SELECT repo_name, count(*) AS events_count\n    FROM github_events\n   WHERE type = 'WatchEvent' /* Yes, `WatchEvent` means star */\nGROUP BY 1\nORDER BY 2 DESC\n   LIMIT 20;\n")),(0,n.kt)("h2",{id:"mini-test"},"Mini Test"),(0,n.kt)("p",null,"Here is a small test for you to practice how to use TiDB Cloud to conduct analytics. "),(0,n.kt)("h3",{id:"q-who-is-the-most-active-contributor-except-the-robot-accounts-on-the-first-hour-of-2022"},"Q: Who is the most active contributor except the robot accounts on the first hour of 2022?"),(0,n.kt)("h3",{id:"click-for-the-answer-\ufe0f"},"Click for the answer. \u2b07\ufe0f"),(0,n.kt)("details",null,(0,n.kt)("summary",null,"Click me to show answer"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"  SELECT actor_login, \n         count(*) AS events_count\n    FROM github_events\n   WHERE actor_login NOT LIKE '%bot%'\nGROUP BY 1\nORDER BY 2 DESC \n   LIMIT 20;\n"))),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("h3",{parentName:"admonition",id:"-details-in-how-oss-insight-works"},"\ud83c\udf1f Details in how OSS Insight works"),(0,n.kt)("p",{parentName:"admonition"},"Find the reason ",(0,n.kt)("a",{parentName:"p",href:"/blog/why-we-choose-tidb-to-support-ossinsight"},"How we implement OSS Insight ?"),"."),(0,n.kt)("p",{parentName:"admonition"},"You can find how we deal with massive github data in ",(0,n.kt)("a",{parentName:"p",href:"/blog/how-it-works"},"Data Preparation for Analytics")," as well!")))}p.isMDXComponent=!0},86325:(t,e,a)=>{a.d(e,{Z:()=>o});const o=a.p+"assets/images/dev-tier-2da1008ee200069937e95647d2d5d32e.png"},20742:(t,e,a)=>{a.d(e,{Z:()=>o});const o=a.p+"assets/images/fill-9b6490f8226717aa53bdd2f02c8b9940.png"},23899:(t,e,a)=>{a.d(e,{Z:()=>o});const o=a.p+"assets/images/import-844cd445abdae77ea91e9d2eaa87bfd2.png"},79958:(t,e,a)=>{a.d(e,{Z:()=>o});const o=a.p+"assets/images/web-shell-03db08f99c8512eb69b32ea5cfbfb26c.png"}}]);